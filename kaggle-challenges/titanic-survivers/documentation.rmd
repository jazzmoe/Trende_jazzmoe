---
title: "documentation"
author: "jazzmoe"
date: "November 9, 2018"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

try(setwd("C:/Users/Moritz/OneDrive/GitHub/Trende_jazzmoe/kaggle-challenges/titanic-survivers"), silent = TRUE)
# include pummy dir

source("00-script.R")
```

## Things to check (Cross when done)

* Run regression on age and impute ages of missing values
* ~~Make a dummy for cabin no cabin~~
* Classify different cabin categories
* Classify "children" using age and parent/siblings variable
* Search for special titles in the name category and test impact on sirvival rate
  + a "Countess" might be more likely to survive than Mr. Huber
* Test simple logit model
* Test random forest
* Test other machine learning models
* Investigate different variable selection | classify importance of variables for classification
* Compare different models

## Data Documentation

| Variable | Definition                                 | Key                                            |
|----------|--------------------------------------------|------------------------------------------------|
| survival | Survival                                   | 0 = No, 1 = Yes                                |
| pclass   | Ticket class                               | 1 = 1st, 2 = 2nd, 3 = 3rd                      |
| sex      | Sex                                        |                                                |
| Age      | Age in years                               |                                                |
| sibsp    | # of siblings / spouses aboard the Titanic |                                                |
| parch    | # of parents / children aboard the Titanic |                                                |
| ticket   | Ticket number                              |                                                |
| fare     | Passenger fare                             |                                                |
| cabin    | Cabin number                               |                                                |
| embarked | Port of Embarkation                        | C = Cherbourg, Q = Queenstown, S = Southampton |

Variable Notes
pclass: A proxy for socio-economic status (SES)
1st = Upper
2nd = Middle
3rd = Lower

age: Age is fractional if less than 1. If the age is estimated, is it in the form of xx.5

sibsp: The dataset defines family relations in this way...
Sibling = brother, sister, stepbrother, stepsister
Spouse = husband, wife (mistresses and fiancÃ©s were ignored)

parch: The dataset defines family relations in this way...
Parent = mother, father
Child = daughter, son, stepdaughter, stepson
Some children travelled only with a nanny, therefore parch=0 for them.

## Exploratory Data Analysis

Analyze here relationships of variables. z.B Plot of fare and pclass

```{r}
glimpse(Train)
p1
p2
p3
p4
p5
pairs.panels(TrainCorr) # corr matrix
```

### Missing Data

Numbers of NAs per variable.

```{r}
naFrame[,c(2:12)] %>% kable
```


### Embarked

```{r}
emb.surv
emb.surv.chisq
```

Peoplo who embarked in Southhampton have significantly higher likelihood of dying.

### Age

Impute age with a regression or some ML algo -> add imputed age to classification -> more information

## Training Models

### Random forrest with 10-fold cv

```{r}
print(Mod3)
confusionMatrix(Mod3)
```

Best model so far Mod3 with accuracy of 0.83.

